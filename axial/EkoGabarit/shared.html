<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

        <!-- include from google
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js"></script>
        -->
        <link type="text/css" href="css/start/jquery-ui-1.7.2.custom.css" rel="stylesheet" />

        <script type="text/javascript" src="js/jquery-1.3.2.min.js"></script>
        <script type="text/javascript" src="js/jquery.json-2.2.min.js"></script>
        <script type="text/javascript" src="js/jquery-ui-1.7.2.custom.min.js"></script>
        <script type="text/javascript" src="js/jquery.timer.js"></script>
        <script type="text/javascript" src="js/sha1-min.js"></script>

        <script type="text/javascript" src="js/ckeditor/ckeditor.js"></script>
        <script type="text/javascript" src="js/ckeditor/adapters/jquery.js"></script>

        <script type="text/javascript" src="ekolib-gabarit-1.0.0.js"></script>

        <link href="gabarit.css" rel="stylesheet" type="text/css" />
        <script type="text/javascript">
            //<![CDATA[
            $(function() {
                var ekoG = new EkoGabarit('#preview');
                ekoG.render('#editordiv');

                // callbacks
                $('#setBtn').click(function(){
                    ekoG.load('gabarit1.html');
                });
                $('#injectBtn').click(function(){
                    ekoG.inject();
                });
                $('#openBtn').click(function(){
                    ekoG.confirmElt.dialog('open');
                });


                $('#replaceBtn').click(function(){
                    $( '#preview' ).find('ekko-placeholder').each(function(index){
                        var aType = $(this).attr('type');
                        var anId = $(this).attr('id');
                        var aName = $(this).attr('name');
                        $(this).text('['+aType+':'+anId+':'+aName+']');
                    });
                });


                ekoG.load('gabarit1.html');
                ekoG.inject();

                ekoG.debugelt = $('#status');

                $.timer(500,function(){
                    if (!ekoG.currentEditingElt){
                        ekoG.debug('Not Editing');
                    } else {
                        var CMP = ekoG.isDirty();
                        ekoG.debug('Dirty (Needs Saving): '+CMP);
                    }
                });
            });

            //]]>
        </script>

    </head>
    <body>
        <h1>
            Editeur avec Gabarit
        </h1>
        <div>
            <a id="setBtn" href="#">Set some content</a> |
            <a id="injectBtn"href="#">Inject Behaviour</a> |
            <a id="replaceBtn"href="#">Replace tags</a> |
            <a id="openBtn"href="#">Modal Dialog</a>
        </div>
        <!-- This <div> holds alert messages to be display in the sample page. -->
        <div id="alerts">
            <noscript>
                <p>
                    <strong>CKEditor requires JavaScript to run</strong>. In a browser with no JavaScript
                    support, like yours, you should still see the contents (HTML data) and you should
                    be able to edit it normally, without a rich editor interface.
                </p>
            </noscript>
        </div>
        <div id="status"></div>
        <div id="previewWrapper">
            <div id="preview">Preview du Contenu</div>
        </div>
        <!--<div id="topSpace"></div>-->
        <div id="editordiv"></div>


    </body>
</html>
