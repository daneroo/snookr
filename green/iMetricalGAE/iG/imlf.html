<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
        <title>jQuery UI Example Page</title>
        <link type="text/css" href="../s/jq/theme/ui.all.css" rel="Stylesheet" />
        <script type="text/javascript" src="../s/jq/jquery-1.3.1.js"></script>
        <script type="text/javascript" src="../s/jq/jquery-ui-personalized-1.6rc6.js"></script>
        <script type="text/javascript" src="jquery.timer.js"></script>
        <script type="text/javascript">
            function addStyleSheet(rule){
                var el = $('<style type="text/css"></style>').appendTo('head').attr({
                    //media: media,
                    //id:    id,
                    type:  'text/css'
                })[0];
                if(el.styleSheet !== undefined && el.styleSheet.cssText !==
                    undefined) { // IE
                    el.styleSheet.cssText = rule;
                } else {
                    el.appendChild(document.createTextNode(rule)); // Others
                    //el.innerHTML = css;
                };

            };

            function flash() {
                //animate( params, [duration], [easing], [callback] )
                var el = $('div.toggler > div.im-badge:visible').eq(0).find("span.im-feed-name");
                var oldColor = el.css("color");
                el.css({'color' : 'red',"opacity": .5});
                el.animate({"opacity": 1}, 500,null, function(){el.css({'color':oldColor})});
            }
            // map unit name and value-class-suffix
            var iMUnits = {
                w:   {name:"W",    suffix:"w",    format:"0000"},
                kw:  {name:"kW",   suffix:"kw",   format:"0.00"},
                kwhd:{name:"kWh/d",suffix:"kwhd", format:"00.0"}
            };
            function add6Badges(parentID){
                //addBadge(parentID,'Live', iMUnits.w);
                addBadge(parentID,'Live', iMUnits.kw);
                addBadge(parentID,'Hour', iMUnits.kw);
                addBadge(parentID,'Day',  iMUnits.kwhd);
                addBadge(parentID,'Week', iMUnits.kwhd);
                addBadge(parentID,'Month',iMUnits.kwhd);
                addBadge(parentID,'Year', iMUnits.kwhd);
                // hide all 6 'right parts of the badges''
                $(parentID).find('.im-badge-right').hide();
                $(parentID).find('.im-badge').addClass('ui-state-default ui-corner-all');
                $(parentID).find('.im-badge').hover(
                function() { $(this).addClass('ui-state-hover'); },
                function() { $(this).removeClass('ui-state-hover'); }  );
            }
            function addBadge(parentID,feedName,feedUnits){
                var html = '<div class="im-badge im-feed-'+feedName+'">'+
                    '   <div class="im-badge-left">'+
                    '       <div><span class="im-feed-name">'+feedName+'</span><span class="im-feed-units">'+feedUnits.name+'</span></div>'+
                    '       <div class="im-v-'+feedUnits.suffix+'">'+feedUnits.format+'</div>'+
                    '   </div>'+
                    '   <div class="im-badge-right">'+
                    '       <div class="im-v-percent">+0%</div>'+
                    '       <div class="im-v-overunder">over target</div>'+
                    '   </div>'+
                    '</div>';
                $(parentID).append(html);
                // hiding and decorationg is performed in add6Badges.
            }

            function addBadgeView(parentID,feedName,feedUnits,bg,fg){
                var html = '<div class="im-badge im-feed-'+feedName+'" style="background:'+bg+'; color: '+fg+'">'+
                    '   <div class="im-badge-left">'+
                    '       <div><span class="im-feed-name">'+feedName+'</span><span class="im-feed-units">'+feedUnits.name+'</span></div>'+
                    '       <div class="im-v-'+feedUnits.suffix+'">'+feedUnits.format+'</div>'+
                    '   </div>'+
                    '   <div class="im-badge-right">'+
                    '       <div class="im-v-percent">+0%</div>'+
                    '       <div class="im-v-overunder">over target</div>'+
                    '   </div>'+
                    '</div>';
                $(parentID).append(html);
                // hiding and decorationg is performed in add6Badges.
                $(parentID).find('.im-badge-right').hide();
                $(parentID).find('.im-badge').addClass('ui-state-default ui-corner-all');
                $(parentID).find('.im-badge').hover(
                function() { $(this).addClass('ui-state-hover'); },
                function() { $(this).removeClass('ui-state-hover'); }  );

            }
            function flat(color) {
                return "#"+color;
            }
            function glass(color) {
                var bg = '#'+color+' url(http://jqueryui.com/themeroller/images/?new='+color+'&w=1&h=400&f=png&q=100&fltr[]=over|textures/02_glass.png|0|0|50) 50% 50% repeat-x';
                return bg;
            }
            function gloss(color) {
                var bg = '#'+color+' url(http://jqueryui.com/themeroller/images/?new='+color+'&w=500&h=100&f=png&q=100&fltr[]=over|textures/12_gloss_wave.png|0|0|85) 50% 50% repeat-x';
                return bg;
            }
            function hsoft(color) {
                var bg = '#'+color+' url(http://jqueryui.com/themeroller/images/?new='+color+'&w=1&h=100&f=png&q=100&fltr[]=over|textures/03_highlight_soft.png|0|0|75) 50% 50% repeat-x';
                return bg;
            }
            $(function(){

                var colorpairs = [['006600','009900'],['3b5598','7f93bc'],['000000','ffffff']];
                $.each( colorpairs, function() {
                    var p=this;
                    //alert("p: "+p)
                    $('#colors').append('<div style="">'+
                        '  <div class="button" style="border: 1px solid red; background: #'+p[0]+'">'+p[0]+'</div>'+
                        '  <div class="button" style="border: 1px solid red; background: #'+p[1]+'">'+p[1]+'</div>'+
                        '</div>');
                    $.each([flat,glass,gloss,hsoft],function(){
                        var ffunc = this;
                        addBadgeView('#sixBrelative','Day',  iMUnits.kwhd,ffunc(p[0]), 'white');
                        addBadgeView('#sixBrelative','Day',  iMUnits.kwhd,ffunc(p[1]), 'black');
                    });
                    $('#sixBrelative').append('<div style="clear:both"/>');
                });
                var themes = [
                    {name:'green', defltbg:'006600',hoverbg:'009900'},
                    {name:'blue',  defltbg:'3b5598',hoverbg:'7f93bc'},
                    {name:'black', defltbg:'000000',hoverbg:'ffffff'}
                ];
                var variants = [
                    {name:'flat',  ffunc: flat  },
                    {name:'glass', ffunc: glass },
                    {name:'gloss', ffunc: gloss },
                    {name:'hsoft', ffunc: hsoft }
                ];
                $.each( themes, function() {
                    var theme=this;
                    $.each(variants,function(){
                        var variant = this;
                        var defltsels=['.ui-state-default','.ui-widget-content .ui-state-default'];
                        var hoversels=[
                            '.ui-state-hover',
                            '.ui-widget-content .ui-state-hover',
                            '.ui-state-focus',
                            '.ui-widget-content .ui-state-focus'
                        ];
                        var cssClass='im-lf-'+theme.name+'-'+variant.name;

                        var qualifieddefltsels=[];
                        $.each(defltsels,function(){
                            qualifieddefltsels.push('.'+cssClass+' '+this);
                        });
                        var qualifiedhoversels=[];
                        $.each(hoversels,function(){
                            qualifiedhoversels.push('.'+cssClass+' '+this);
                        });
                        var cssRule = '\n\n/* css class rules for: '+cssClass+' */\n'+
                            qualifieddefltsels.join(', ')+' {\n'+
                            '  background: '+variant.ffunc(theme.defltbg)+';\n'+
                            '  color: white; \n'+
                            '}\n'+
                            qualifiedhoversels.join(', ')+' {\n'+
                            '  background: '+variant.ffunc(theme.hoverbg)+';\n'+
                            '  color: black; \n'+
                            '}\n';

                        $('#css-text').append(cssRule);
                        addStyleSheet(cssRule);

                        var sixb = '<h2 class="demoHeaders">Test for: '+cssClass+'</h2>'+
                            '<div style="font-size:100%;">'+
                            '  <div id="test-'+cssClass+'"class="'+cssClass+'"></div>'+
                            '</div>';
                        $('#allSixes').append(sixb);
                        add6Badges('#test-'+cssClass);
                        $('#allSixes').append('<div style="clear:both"/>');


                    });
                });
                // make all badges expand-right on click
                $('.im-badge').click(function() {
                    $(this).find('.im-badge-right').toggle('slide');
                } );

                //  timers
                $.timer(10000, function (timer) {
                    flash();
                });

                //alert("css: "+$(".im-lf-green-flat").css("color"));
                //alert("attr:style: "+$("#test-im-lf-green-flat").attr("style"));
                //$("#test-im-lf-green-flat").attr("style");
                //alert("attr:class: "+$("#test-im-lf-green-flat").attr("class"));

            });
        </script>
        <style type="text/css">
            body { font-family: 'trebuchet ms', verdana, arial; }
            /* button badges */
            div { margin: 0; padding: 0 }

            div.im-badge {
                float:left;
                width:auto;  height:3em;
                text-align:center;

                padding: 0.3em;
                margin: 0.05em; /* inter box spacing */
            }
            div.im-badge-left {
                float:left;
                width:3.5em;
            }
            div.im-v-w, div.im-v-kw, div.im-v-kwhd {
                clear:both;
                /* vertical offset between floating feed name/units and Value*/
                padding-top:0.3em;
            }
            span.im-feed-name {
                float:left;
                font-size:60%; /*smaller*/
            }
            span.im-feed-units {
                float:right;
                height:1em;
                font-size:50%;
                padding-top:0.2em;
            }
            div.im-badge-right {
                float:right;
                width:4.2em;
            }
            div.im-v-percent {
                /* vertical offset for percent Value*/
                padding-top:0.6em;
            }
            div.im-v-overunder {
                font-size:50%;
            }
            .button {
                float: left;
                width: 5em;
                height: 2em;
                margin:.2em;
            }
        </style>
    </head>
    <body>

        <div id="colors"></div>
        <div style="clear:both"/>

        <h2 class="demoHeaders">Animated badge</h2>
        <div id="scaleTheFont" style="font-size:150%;">
            <div id="sixBrelative" class="toggler" style="background: none; border:0;">
            </div>
        </div>
        <div id="allSixes" ></div>
        <pre id="css-text"></pre>

    </body>
</html>


