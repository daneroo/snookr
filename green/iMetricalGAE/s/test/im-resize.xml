<?xml version="1.0" encoding="UTF-8" ?> 
<Module>
<!-- removed height="140" width="240" -->
    <ModulePrefs title="iM-size-test"
     scrolling="false"
     description="iMetrical Resize Test"
     author="Daneroo" author_email="daniel.nojunk@gmail.com">
        <Require feature="dynamic-height"/>
        <Require feature="views"/>
    </ModulePrefs>
    <UserPref name="refreshInterval" display_name="Refresh Interval" default_value="10"/>
    <Content type="html" view="canvas,home">
<![CDATA[ 
        <!-- other bases: http://imetrical.appspot.com/s
                          http://snookr.googlecode.com/svn/trunk/green/iMetricalGAE/s
        -->
        <link type="text/css" href="http://imetrical.appspot.com/s/css/imetrical.all.css" rel="Stylesheet" />
        <script type="text/javascript" src="http://imetrical.appspot.com/s/jq/jquery-1.3.1.js"></script>
        <script type="text/javascript" src="http://imetrical.appspot.com/s/jq/jquery-ui-personalized-1.6rc6.js"></script>
        <script type="text/javascript" src="http://imetrical.appspot.com/s/js/jquery.timer.js"></script>
        <script type="text/javascript" src="http://imetrical.appspot.com/s/js/imetrical-1.0.js"></script>
        <script type="text/javascript">
            var prefs = null;
            try { prefs = new _IG_Prefs(__MODULE_ID__); } catch(err) {}
            var getRefreshIntervalMS = function() {
                var refreshInterval = 5;
                if (prefs) refreshInterval = prefs.getString("refreshInterval");
                return refreshInterval*1000; // every n seconds
            };

            function adjHeight() {
                try { _IG_AdjustIFrameHeight(); } catch(err) {}
            }
            function navigateTo(dest) {
                var supported_views = gadgets.views.getSupportedViews();
                gadgets.views.requestNavigateTo(supported_views[dest]);
            }
            function getViewName() {
                return gadgets.views.getCurrentView().getName();
            }
            function toggleProfileView() {
                if (getViewName() == "canvas") {
                    navigateTo("home");
                } else {
                    navigateTo("canvas");
                }
            }
            $(function(){
                    iM18nLang='en';
                    add6Badges('#badges');
                    //  animation
                    startAnimNow(4000, function (timer) {
                        storyboardNextAndRollTheme();
                        //storyboardNext();
                    });
                    // fetching timer
                    startAnimNow(getRefreshIntervalMS(), function (timer) {
                        flashInjector();
                        fetchAndMapFeeds(null,null); // url,myInjector
                    });

                $("#maxButton").click(toggleProfileView);

                function showWinSize(){
                    var info=""+$(window).width()+"X"+$(window).height();
                    $("#error").html("win: "+info);
                    adjHeight();
                }
                $(window).bind('resize',showWinSize);
                showWinSize();
            });
        </script>
        <style type="text/css">
            /* Here be dragons: customize the css */
        </style>

        <div id="maxButton" style="float: right; width:1em; height:1em;">*</div>
   <div>
        <div id="scaleTheFont" style="font-size:100%">
            <div id="badges" class="toggler im-lf-black-gloss" style="background: none; border:0;">
            </div>
        </div>
        <div style="clear:both;"></div>
        <div id="chart"></div>
        <div id="status" style="font-size:smaller; color:gray;"></div>
        <div id="error" style="font-size:smaller; color:red;"></div>
   </div>

]]> 
    </Content>

</Module>
