<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
        <title>cc128</title>
        <!-- relative paths for css and js
            should use ../css/, ../jq/ and ../js/
            absolute path would be
             /s/css, /s/jq, and /s/jq

             Consolidate all css (include ? jq-ui) yes: required
        <link type="text/css" href="../jq/theme/ui.all.css" rel="Stylesheet" />
        <link type="text/css" href="../css/imetrical.layout.css" rel="Stylesheet" />
        <link type="text/css" href="../css/imetrical.theme.css" rel="Stylesheet" />

        -->
        <link type="text/css" href="../css/imetrical.all.css" rel="Stylesheet" />
        <script type="text/javascript" src="../jq/jquery-1.3.1.js"></script>
        <script type="text/javascript" src="../js/jquery.timer.js"></script>
        <script type="text/javascript" src="../js/imetrical-1.0.js"></script>
        <script type="text/javascript">


            // getting ready to inject from settings..
            var prefs = null;
            try { prefs = new _IG_Prefs(__MODULE_ID__); } catch(err) {}
            var getRefreshIntervalMS = function() {
                var refreshInterval = 5;
                if (prefs) refreshInterval = prefs.getString("refreshInterval");
                if (refreshInterval<2) refreshInterval=2;
                return refreshInterval*1000; // every n seconds
            };


            var feedsRef; // keep a reference to the feeds array
            var currentFeed=1;
            function myInjector(feeds) {
                //flashInjector();
                feedsRef = feeds;

                standardInjector(feeds);
                // feeds array: L H D W M Y
                var wattLive= Math.round(feeds[0].value);
                var kWhForDay = Math.round(feeds[2].value*24.0/1000);
                var kWhForWeek = Math.round(feeds[3].value*24.0/1000*7);
                var kWhForMonth = Math.round(feeds[5].value*24.0/1000*30);
                $('#status').html('wattLive : '+wattLive
                    +' | kWh Day : '+kWhForDay
                    +' | kWh Week : '+kWhForWeek
                    +' | kWh Month : '+kWhForMonth
                    + "<br>"+new Date()     );
                currentFeed= (currentFeed+1)%5;
                //alert("myInjector");
            }


            $(function(){
                iM18nLang='en';
                //  timers
                animCanRun=true;

                // storyboard anim...
                startAnimNow(5000, function (timer) {
                    storyboardNextAndRollTheme();
                    //storyboardNext();
                });

                // fetching timer
                startAnimNow(getRefreshIntervalMS(), function (timer) {
                    fetchAndMapFeeds(null,myInjector);
                });


            });
        </script>
        <style type="text/css">
            /* Here be dragons: customize the css */
            .cc128-bg {
                background-image:url('cc128-7903-bg-800.png');
                width:800px;
                height:533px;
                border: solid 1px red;
            }
            .cc128-lcdmask {
                background-image:url('cc128-lcd-218.png');
                width:218px;
                height:260px;
                position:relative;
                left:350px;
                left:130px;
                top:67px;
                border: solid 1px red;
            }
            .powdigits {
                position:relative;
                left:101px;
                top:19px;
            }
            .costdigits {
                position:relative;
                left:101px;
                top:19px;
            }
            .avghistscope {
                position:relative;
                left:157px;
                top:48px;
            }
            .avghistscoped1 {
                position:relative;
                left:-5px;
            }
            .avghistdigits {
                position:relative;
                left:115px;
                top:72px;
                top:52px;
            }
            .hourdigits {
                position:relative;
                left:-5px;
                top:105px;
                top:84px;
            }
            .minutedigits {
                position:relative;
                left:48px;
                top:69px;
                top:49px;
            }
            .tempdigits {
                position:relative;
                left:142px;
                top:32px;
                top:12px;
            }
            .pp {
                position:absolute;
                left:0px; top:19px;
                background-color:#ee0;
                background-color:transparent;
            }
            #pp0 { left:101px; }
            #pp1 { left:126px; }
            #pp2 { left:150px; }
            .cc {
                position:absolute;
                left:0px; top:54px;
                background-color:#ee0;
                background-color:transparent;
            }
            #cc0 { left:101px; }
            #cc1 { left:126px; }
            #cc2 { left:150px; }
            .ss {
                position:absolute;
                left:0px; top:124px;
                background-color:#ee0;
                background-color:transparent;
            }
            #ss0 { left:158px; }
            #ss1 { left:165px; }
            .aa {
                position:absolute;
                left:0px; top:142px;
                background-color:#ee0;
                background-color:transparent;
            }
            #aa0 { left:117px; }
            #aa1 { left:141px; }
            #aa2 { left:165px; }
            #aa3 { left:189px; }
            .hh {
                position:absolute;
                left:0px; top:212px;
                background-color:#ee0;
                background-color:transparent;
            }
            #hh0 { left:-4px; }
            #hh1 { left:21px; }
            #hh2 { left:48px; }
            #hh3 { left:72px; }
            .tt {
                position:absolute;
                left:0px; top:212px;
                background-color:#ee0;
                background-color:transparent;
            }
            #tt0 { left:142px; }
            #tt1 { left:166px; }
            #status {
                font-size:smaller; color:gray;
            }
        </style>
    </head>
    <body>
        <div class="cc128-bg">
            <div class="cc128-lcdmask">
<!--                <div class="powdigits">
                    <img id="p0" src="digit43px/digit1.png" width="20" height="32" alt="digit"/>
                    <img id="p1" src="digit43px/digit1.png" width="20" height="32" alt="digit"/>
                    <img id="p2" src="digit43px/digit1.png" width="20" height="32" alt="digit"/>
                </div>
                <div class="costdigits">
                    <img name="c0" src="digit43px/digit1.png" width="20" height="32" alt="digit0"/>
                    <img name="c1" src="digit43px/digit1.png" width="20" height="32" alt="digit0"/>
                    <img name="c2" src="digit43px/digit1.png" width="20" height="32" alt="digit0"/>
                </div>
                <div class="avghistscope">
                    <img name="s0" src="digit15px/digit1.png" width="7" height="11" alt="digit0"/>
                    <img class="avghistscoped1" name="s1" src="digit15px/digit1.png" width="7" height="11" alt="digit0"/>
                </div>
                <div class="avghistdigits">
                    <img name="a0" src="digit43px/digit1.png" width="20" height="32" alt="digit0"/>
                    <img name="a1" src="digit43px/digit1.png" width="20" height="32" alt="digit0"/>
                    <img name="a2" src="digit43px/digit1.png" width="20" height="32" alt="digit0"/>
                    <img name="a3" src="digit43px/digit1.png" width="20" height="32" alt="digit0"/>
                </div>
                <div class="hourdigits">
                    <img name="h0" src="digit43px/digit1.png" width="20" height="32" alt="digit0"/>
                    <img name="h1" src="digit43px/digit1.png" width="20" height="32" alt="digit0"/>
                </div>
                <div class="minutedigits">
                    <img name="m0" src="digit43px/digit1.png" width="20" height="32" alt="digit0"/>
                    <img name="m1" src="digit43px/digit1.png" width="20" height="32" alt="digit0"/>
                </div>
                <div class="tempdigits">
                    <img name="t0" src="digit43px/digit1.png" width="20" height="32" alt="digit0"/>
                    <img name="t1" src="digit43px/digit1.png" width="20" height="32" alt="digit0"/>
                </div>
-->
                <img id="pp0" class="pp" src="digit43px/digit2.png" width="20" height="32" alt="digit"/>
                <img id="pp1" class="pp" src="digit43px/digit9.png" width="20" height="32" alt="digit"/>
                <img id="pp2" class="pp" src="digit43px/digit2.png" width="20" height="32" alt="digit"/>
                <img id="cc0" class="cc" src="digit43px/digit3.png" width="20" height="32" alt="digit"/>
                <img id="cc1" class="cc" src="digit43px/digit8.png" width="20" height="32" alt="digit"/>
                <img id="cc2" class="cc" src="digit43px/digit1.png" width="20" height="32" alt="digit"/>
                <img id="ss0" class="ss" src="digit15px/digit3.png" width="7" height="11" alt="digit"/>
                <img id="ss1" class="ss" src="digit15px/digit0.png" width="7" height="11" alt="digit"/>
                <img id="aa0" class="aa" src="digit43px/digit2.png" width="20" height="32" alt="digit"/>
                <img id="aa1" class="aa" src="digit43px/digit3.png" width="20" height="32" alt="digit"/>
                <img id="aa2" class="aa" src="digit43px/digit4.png" width="20" height="32" alt="digit"/>
                <img id="aa3" class="aa" src="digit43px/digit5.png" width="20" height="32" alt="digit"/>
                <img id="hh0" class="hh" src="digit43px/digit1.png" width="20" height="32" alt="digit"/>
                <img id="hh1" class="hh" src="digit43px/digit2.png" width="20" height="32" alt="digit"/>
                <img id="hh2" class="hh" src="digit43px/digit5.png" width="20" height="32" alt="digit"/>
                <img id="hh3" class="hh" src="digit43px/digit6.png" width="20" height="32" alt="digit"/>
                <img id="tt0" class="tt" src="digit43px/digit7.png" width="20" height="32" alt="digit"/>
                <img id="tt1" class="tt" src="digit43px/digit7.png" width="20" height="32" alt="digit"/>
                <br><br><br><br><br>MASK
            </div>
        </div>
        <div id="status">status</div>
    </body>
</html>


