<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
        <title>im-badge Layout</title>
        <!-- relative paths for css and js
            should use ../css/, ../jq/ and ../js/
            absolute path would be
             /s/css, /s/jq, and /s/jq

             Consolidate all css (include ? jq-ui) yes: required
        <link type="text/css" href="../jq/theme/ui.all.css" rel="Stylesheet" />
        <link type="text/css" href="../css/imetrical.layout.css" rel="Stylesheet" />
        <link type="text/css" href="../css/imetrical.theme.css" rel="Stylesheet" />

        -->
        <link type="text/css" href="../css/imetrical.all.css" rel="Stylesheet" />
        <script type="text/javascript" src="../jq/jquery-1.3.1.js"></script>
        <script type="text/javascript" src="../jq/jquery-ui-personalized-1.6rc6.js"></script>
        <script type="text/javascript" src="../js/jquery.timer.js"></script>
        <script type="text/javascript" src="../js/imetrical-1.0.js"></script>
        <script type="text/javascript">
            function flash() {
                var el = $('div.toggler > div.im-badge:visible').eq(0).find("span.im-feed-name");
                el.css({'color' : 'red',"opacity": .5});
                el.animate({"opacity": 1}, 500,null, function(){el.css({'color':'inherit'})});
            }
            function togglerot( ) {
                var animOut='slide'; // slide,drop,null
                var animIn='slide'; // slide,drop,null
                //$('#Live').toggle('drop');
                var ll = $('div.toggler > div.im-badge:visible').length;
                if (ll<=3) {
                    $('div.toggler > div.im-badge:hidden').show(animIn);
                } else {
                    var index=2;
                    if (ll==6) index=1;
                    $('div.toggler > div.im-badge:visible').eq(index).toggle(animOut);
                }

            }
            var currentframe=-1;
            function toggleseq( ) {
                var animOut='slide'; // slide,drop,null
                var animIn='slide'; // slide,drop,null
                if (currentframe==-1) { // also force reset? when
                    $('.toggler > div.im-badge:gt(2)').hide();
                    $('.toggler > div.im-badge:lt(3)').show();
                    currentframe=0;
                    return;
                }
                //moves
                var m = { L:1, H:2, D:3, W:4, M:5, Y:6, Lx:101, Hx:102, Dx:103, Wx:104, Mx:105, Yx:106};
                var storyboard = [ // 1-based index
                    //[-H,W],
                    [-m.H,m.Dx],
                    [-m.Dx,m.W],
                    [-m.W,m.M],
                    [-m.M,m.Y],
                    [-m.Y,m.H]
                ];
                //toggle each badge against storyboard
                $('#console').html('--');
                $('#console').append('frame '+currentframe+'\n');

                /*
                 * Codes use 1..6 for indexing (as in css, and avoid signed '0' problem
                 * +n show n, -n: hide n
                 * +100+n expand n, -100+n
                 */
                var eat=storyboard[currentframe];
                function boundEater() {
                    if (eat.length==0) return;
                    var head = eat.shift(); // from the front
                    if (head<0) {
                        head=-head;
                        if (head>100) {
                            head-=100;
                            $('#console').append('  collapse '+head+'\n');
                            $('.toggler > div.im-badge:nth-child('+(head)+')').find('.im-badge-right').hide(animOut,null,1000,boundEater);
                        } else {
                            $('#console').append('  hide '+head+'\n');
                            $('.toggler > div.im-badge:nth-child('+(head)+')').hide(animOut,null,1000,boundEater);
                        }
                    } else {
                        if (head>100) {
                            head-=100;
                            $('#console').append('  expand '+head+'\n');
                            $('.toggler > div.im-badge:nth-child('+(head)+')').find('.im-badge-right').show(animIn,null,1000,boundEater);
                        } else {
                            $('#console').append('  show '+head+'\n');
                            $('.toggler > div.im-badge:nth-child('+(head)+')').show(animIn,null,1000,boundEater);
                        }
                    }
                }
                boundEater();
                currentframe = (currentframe+1) % storyboard.length;
                if (currentframe==0) rolltheme();

            }
            var themes=['im-lf-black-gloss','im-lf-blue-hsoft','im-lf-green-glass'];
            function rolltheme() {
                var newtheme = themes.shift();
                $('.toggler').addClass(newtheme);
                $.each(themes,function(){
                    $('.toggler').removeClass(this);
                });
                themes.push(newtheme);
            }

            $(function(){
                add6Badges('#sixBrelative');
                add6Badges('#sixB2W');
                add6Badges('#sixBflow');
                add6Badges('#sixB3x2');
                add6Badges('#sixB2x3');

                // make all badges expand-right on click
                $('.im-badge').click(function() {
                    $(this).find('.im-badge-right').toggle('slide');
                } );

                $('.toggler > div.im-badge:gt(2)').hide();

                //  timers
                $.timer(2500, function (timer) {
                    //togglerot();
                    toggleseq();
                });
                $.timer(2000, function (timer) {
                    flash();
                });


            });
        </script>
        <style type="text/css">
            /* Here be dragons: customize the css */
        </style>
    </head>
    <body>

        <h2 class="demoHeaders">Relative Container Flat</h2>
        <div id="scaleTheFont" style="font-size:150%">
            <div id="relativeLayerWithHeight001"
                 style="position: relative; width: 912.8em; height: 3.8em; overflow:hidden;">
                <div id="positioningLayerWithWidth001"
                     style="position: absolute; width: 100em;"
                     <div id="sixBrelative" class="toggler im-lf-black-gloss" style="background: none; border:0;">
                    </div>
                </div>
            </div>
        </div>
        <pre id="console" ></pre>
        <h2 class="demoHeaders">Double Width Glass</h2>
        <div style="font-size:150%">
            <div id="relativeLayerWithHeight002"
                 style="position: relative; wwidth: 17em; width: 32em; height: 3.8em; overflow:hidden;">
                <div id="positioningLayerWithWidth002"
                     style="position: absolute; width: 100em;">
                    <div id="sixB2W" class="im-lf-blue-glass" style="background: none; border:0;">
                    </div>
                </div>
            </div>
        </div>

        <h2>Badges Flow Gloss</h2>
        <div id="sixBflow" class="im-lf-blue-gloss" style="font-size:150%">
        </div>
        <div style="clear:both"></div>

        <h2>Badges 3x2 Glass</h2>
        <div id="sixB3x2" class="im-lf-blue-glass" style="width:17em;">
        </div>
        <div style="clear:both"></div>

        <h2>Badges 2x3 HSoft</h2>
        <div id="sixB2x3" class="im-lf-blue-hsoft" style="width:11em; background:green;">
        </div>
        <div style="clear:both"></div>


        <!--
        <center>
            <iframe src ="http://imetrical.appspot.com/" width="80%" height="350px" frameborder="0" scrolling="no">
                <p>Your browser does not support iframes.</p>
            </iframe>
        </center>
        -->
    </body>
</html>


