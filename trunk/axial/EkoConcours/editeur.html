<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <!-- replace later with http://code.google.com/apis/ajaxlibs/
            <script src="http://www.google.com/jsapi"></script>
        -->

        <link type="text/css" href="css/start/jquery-ui-1.7.2.custom.css" rel="stylesheet" />

        <script type="text/javascript" src="js/jquery-1.3.2.min.js"></script>
        <script type="text/javascript" src="js/jquery.json-2.2.min.js"></script>
        <script type="text/javascript" src="js/jquery-ui-1.7.2.custom.min.js"></script>
        <script type="text/javascript" src="ekolib-1.0.0.js"></script>
        <script type="text/javascript">
            $(function(){
                $('#tabs').tabs({
                    show: function(event, ui) {
                        // the new tab being shown is
                        //   $(this).tabs('option', 'selected'))
                        //   or ui['index']
                        //alert($.toJSON(ui));
                        if (0==ui.index){
                            renderEditor(contest1,'#eko-contest-editor');
                        } else if (1==ui.index) {
                        } else if (2==ui.index) {
                            renderJSON(contest1,'#eko-contest-json');
                        } else {

                        }
                        //$('#status').html('tab: '+$(this).tabs('option', 'selected'));
                        //$('#status').html('tab: '+ui.index);
                    }
                });

                // Should be removed
                $("#rerender").click(function() {
                    renderEditor(contest1,'#eko-contest-editor');
                    renderJSON(contest1,'#eko-contest-json');
                    return false;
                });

                var inplacefielddata={
                    "type":"EKO",
                    "subtype":"nom",
                    "label":"Nom",
                    "validation":"None"
                };

                $('#inplacefield').data('fielddata',inplacefielddata).click(function() {
                    var field = $(this).data('fielddata');
                    if ($(this).hasClass('editing')){
                        $(this).removeClass('editing');
                        var html='Field : '+field.type+' : '+field.subtype+' : '+field.label+' : '+field.validation+'<br>';
                        $(this).html(html);
                    } else {
                        $(this).addClass('editing');
                        var html='Editing Field : '+field.type+' : '+field.subtype+' : '+field.label+' : '+field.validation+' ';
                        html+='[<a href="#">OK</a>] [<a href="#">CANCEL</a>]'
                        $(this).html(html);
                    }
                    $('#fieldjson').html('<pre>'+$.toJSON(field)+'</pre>');
                    return false;
                });
                $('#inplacefield').click().click();

                // Cloning experiments
                var goid=1000;
                var thingtemplate = $('<div class="someclass">SOMECONTENTTPL</div>');
                thingtemplate.hover(function() {
                    $(this).css("color","red");
                    $('#status').html($(this).data('oid'));
                }, function() {
                    $(this).css("color",null);
                });

                function cloneOne(){
                    //var cl = $('#hiddenelements .someclass').clone(true);
                    var cl = thingtemplate.clone(true);
                    cl.data('oid', goid++);
                    cl.appendTo('#maniproot');
                }

                var clnBtn = EkoButton('Clone').click(function() {
                    cloneOne();
                    return false;
                });
                $('#cloneOneBtn').append($('<p />').append(clnBtn));


            });
        </script>
        <style type="text/css">
            /*demo page css*/
            body{ font: 80% "Trebuchet MS", sans-serif; margin: 50px;}
            .demoHeaders { margin-top: 2em; }
            .eko-btn { height:20px; padding: .4em 1em .4em 20px;text-decoration: none; position: relative; text-decoration:none;}
            .eko-btn span.ui-icon {margin: 0 5px 0 0;position: absolute;left: .2em;top: 50%;margin-top: -8px;}

            /* For arrows and such */
            .eko-action-icon {width:16px; height:20px; padding: 0 0 0 20px;text-decoration: none; position: relative; text-decoration:none;}
            .eko-action-icon span.ui-icon {margin: 0 0 0 0;position: absolute;left: .1em;top: 50%;margin-top: -8px;}

            /*ul#icons {margin: 0; padding: 0;}
            ul#icons li {margin: 2px; position: relative; padding: 4px 0; cursor: pointer; float: left;  list-style: none;}
            ul#icons span.ui-icon {float: left; margin: 0 4px;}
            */


            /* so fillSpace works on accordion..
            .steps { height:200px;}*/

            #inplacefield {padding:10px;border:solid yellow;}
            #inplacefield.editing {border:solid red;}
            .accordioncontrol {float:right;}
            .choiceeditor {margin-left:4em; font-size:80%;}
            .fieldcontrol {margin-left:2em; font-size:80%; margin-top:25px;}
            .fieldcontrol a { margin-right:.5em;}

            .fieldtypelabel {width:5em; float:left;}
            .field select {width:10em;}
            .field select.field-validation {width:7em;}
            .jsondbg {display:inline; visibility:hidden; margin-left:20px; font-size:80%;}
        </style>

    </head>
    <body>
        <h1>Status</h1>
        <pre id="status">status</pre>

        <h1>Editeur de concours</h1>
        <a id="rerender" href="#">Re-render</a>

        <div id="tabs">
            <ul>
                <li><a href="#tabs-1">Editor</a></li>
                <li><a href="#tabs-2">Preview</a></li>
                <li><a href="#tabs-3">JSON</a></li>
            </ul>
            <div id="tabs-1">
                <div id="eko-contest-editor"></div>
            </div>
            <div id="tabs-2">This is a preview of the form</div>
            <div id="tabs-3"><div id="eko-contest-json"></div></div>
        </div>

        <h1>In-place Field Editor</h1>
        <p>This div is bound to a javascript object representing a field.</p>
        <div id="inplacefield">INPLACE EDITOR</div>
        <div>Field JSON:<div id="fieldjson"></div></div>

        <h1>DOM manipulation</h1>
        <div id="cloneOneBtn"></div>

        <div id="maniproot">Dom Manip root</div>

        <!-- Test css for icons with/without text...
        <h1>Explorer icon tests</h1>
        Try with text...
        <p><a href="#" class="eko-btn ui-state-default ui-corner-all"><span class="ui-icon ui-icon-plus"></span>Add</a></p>
        <p><a href="#" class="eko-btn ui-state-default ui-corner-all"><span class="ui-icon ui-icon-arrowthick-1-n"></span>Up</a></p>
        <p><a href="#" class="eko-btn ui-state-default ui-corner-all"><span class="ui-icon ui-icon-arrowthick-1-s"></span>Down</a></p>
        <p><a href="#" class="eko-btn ui-state-default ui-corner-all"><span class="ui-icon ui-icon-closethick"></span>Close</a></p>
        <p>And without</p>
        <p><a href="#" class="eko-action-icon ui-state-default ui-corner-all"><span class="ui-icon ui-icon-plus"></span></a></p>
        <p><a href="#" class="eko-action-icon ui-state-default ui-corner-all"><span class="ui-icon ui-icon-arrowthick-1-n"></span></a></p>
        <p><a href="#" class="eko-action-icon ui-state-default ui-corner-all"><span class="ui-icon ui-icon-arrowthick-1-s"></span></a></p>
        <p><a href="#" class="eko-action-icon ui-state-default ui-corner-all"><span class="ui-icon ui-icon-closethick"></span></a></p>
        -->
    </body>
</html>
